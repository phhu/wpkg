<?xml version="1.0" encoding="UTF-8"?>

<packages:packages xmlns:packages="http://www.wpkg.org/packages"
	xmlns:wpkg="http://www.wpkg.org/wpkg" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xsi:schemaLocation="http://www.wpkg.org/packages ../xsd/packages.xsd">

 	<package
        id="chocolatey"
        name="Chocolatey"
        revision="1.%version%"
        reboot="false"
        priority="1">
		
		<variable name="version" value="0.10.5.0" />

		<check type="file" condition="exists" path='%programdata%\chocolatey\bin\chocolatey.exe' value="%version%" />
		
		<variable name="installerPath" value="chocolatey\install.ps1"/>
		<variable name="installerURL" value="https://chocolatey.org/install.ps1" />

		<!-- conditional download -->
		<install cmd='"%DOWNLOADERPATH%" "%installerURL%"	"%software%\%installerPath%"  >NUL'>
			<condition><check type="logical" condition="not"><check type="file" condition="exists" path="%SOFTWARE%\%installerPath%" /></check></condition>
		</install>		
		
		<install cmd='powershell "%SOFTWARE%\%installerPath%"'  /> 
		 
		<upgrade include="install" />

		<remove cmd='cmd /c rmdir /s /q "%programdata%\chocolatey\"' /> 

  	</package>	
	
	<package
        id="vlc"
        name="VideoLAN Client (using Chocolatey)"
        revision="1.%version%"
        reboot="false"
        priority="1">

		<depends package-id="chocolatey" />
		
		<variable name="version" value="2.2.6" />
		<variable name="PKGNAME" value="vlc" />
		
	    <check type='uninstall' condition='versiongreaterorequal' path='VLC media player' value='%version%' />
	 
		<install cmd='%COMSPEC% /c choco upgrade %PKGNAME% -y'  /> 
		<upgrade include="install" />
		<remove  cmd='%COMSPEC% /c choco uninstall %PKGNAME% -y'/>
		
		<!--
		<install cmd='cmd /c %programdata%\chocolatey\bin\chocolatey.exe install %PKGNAME% -y'  /> 
		<install cmd='%COMSPEC% /c choco install %PKGNAME% -y - -forceX86 - -force' architecture="x64" /> 
		-->
		<!-- 
		Can be useful to pipe chocolatey output to log file: e.g. &gt;c:\temp\choc.log 
		or see C:\ProgramData\chocolatey\logs\chocolatey.log
		-->
  	</package>	

	
</packages:packages>
